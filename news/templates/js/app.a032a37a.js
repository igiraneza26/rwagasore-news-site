(function(){"use strict";var t={9254:function(t,o,e){var n=e(5130),r=e(6768);function s(t,o,e,n,s,u){const a=(0,r.g2)("AppNavbar"),l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(a),(0,r.bF)(l)],64)}function u(t,o,e,n,s,u){const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",null,[(0,r.bF)(a,{to:"/"},{default:(0,r.k6)((()=>o[1]||(o[1]=[(0,r.eW)("Home")]))),_:1}),s.user?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(a,{key:0,to:"/login"},{default:(0,r.k6)((()=>o[2]||(o[2]=[(0,r.eW)("Login")]))),_:1})),s.user?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:o[0]||(o[0]=(...t)=>u.logout&&u.logout(...t))},"Logout")):(0,r.Q3)("",!0)])}e(4114);var a=e(4373);const l=a.A.create({baseURL:"http://127.0.0.1:8000/api",headers:{"Content-Type":"application/json"}});var i=l,p={data(){return{user:localStorage.getItem("user")}},methods:{logout(){i.get("/logout/").then((()=>{localStorage.removeItem("user"),this.user=null,this.$router.push("/")}))}}},d=e(1241);const c=(0,d.A)(p,[["render",u]]);var v=c,m={components:{AppNavbar:v}};const h=(0,d.A)(m,[["render",s]]);var f=h,g=e(1387);function k(t,o,e,n,s,u){const a=(0,r.g2)("NewsPost");return(0,r.uX)(),(0,r.CE)("div",null,[o[0]||(o[0]=(0,r.Lk)("h2",null,"Latest News",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.posts,(t=>((0,r.uX)(),(0,r.Wv)(a,{key:t.id,post:t},null,8,["post"])))),128))])}var b=e(4232);const w={class:"post"};function C(t,o,e,n,s,u){const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",w,[(0,r.Lk)("h3",null,[(0,r.bF)(a,{to:"/post/"+e.post.id},{default:(0,r.k6)((()=>[(0,r.eW)((0,b.v_)(e.post.title),1)])),_:1},8,["to"])]),(0,r.Lk)("p",null,"By "+(0,b.v_)(e.post.author__username)+" | "+(0,b.v_)(e.post.created_at),1),(0,r.Lk)("p",null,(0,b.v_)(e.post.content.substring(0,100))+"...",1),(0,r.Lk)("button",{onClick:o[0]||(o[0]=t=>u.vote("up"))},"👍 "+(0,b.v_)(s.upvotes),1),(0,r.Lk)("button",{onClick:o[1]||(o[1]=t=>u.vote("down"))},"👎 "+(0,b.v_)(s.downvotes),1)])}var L={name:"NewsPost",props:["post"],data(){return{upvotes:this.post.upvotes,downvotes:this.post.downvotes}},methods:{vote(t){i.post(`/posts/${this.post.id}/vote/`,{vote:t}).then((t=>{this.upvotes=t.data.upvotes,this.downvotes=t.data.downvotes}))}}};const _=(0,d.A)(L,[["render",C]]);var y=_,E={name:"HomePage",components:{NewsPost:y},data(){return{posts:[]}},mounted(){i.get("/posts/").then((t=>{this.posts=t.data}))}};const O=(0,d.A)(E,[["render",k]]);var X=O;function A(t,o,e,s,u,a){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("h2",null,(0,b.v_)(u.post.title),1),(0,r.Lk)("p",null,"By "+(0,b.v_)(u.post.author)+" | "+(0,b.v_)(u.post.created_at),1),(0,r.Lk)("p",null,(0,b.v_)(u.post.content),1),o[2]||(o[2]=(0,r.Lk)("h3",null,"Comments",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(u.post.comments,(t=>((0,r.uX)(),(0,r.CE)("li",{key:t.id},[(0,r.Lk)("strong",null,(0,b.v_)(t.author),1),(0,r.eW)(": "+(0,b.v_)(t.text),1)])))),128))]),o[3]||(o[3]=(0,r.Lk)("h3",null,"Add a Comment",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":o[0]||(o[0]=t=>u.newComment=t)},null,512),[[n.Jo,u.newComment]]),(0,r.Lk)("button",{onClick:o[1]||(o[1]=(...t)=>a.addComment&&a.addComment(...t))},"Submit")])}var j={data(){return{post:{},newComment:""}},mounted(){const t=this.$route.params.id;i.get(`/posts/${t}/`).then((t=>{this.post=t.data}))},methods:{addComment(){i.post(`/posts/${this.post.id}/comment/`,{text:this.newComment}).then((()=>{alert("Comment added!"),location.reload()})).catch((t=>alert("Error: "+t)))}}};const P=(0,d.A)(j,[["render",A]]);var S=P;function x(t,o,e,s,u,a){return(0,r.uX)(),(0,r.CE)("div",null,[o[3]||(o[3]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>u.username=t),placeholder:"Username"},null,512),[[n.Jo,u.username]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>u.password=t),type:"password",placeholder:"Password"},null,512),[[n.Jo,u.password]]),(0,r.Lk)("button",{onClick:o[2]||(o[2]=(...t)=>a.login&&a.login(...t))},"Login")])}var F={name:"UserLogin",data(){return{username:"",password:""}},methods:{login(){i.post("/auth/login/",{username:this.username,password:this.password}).then((t=>{localStorage.setItem("user",t.data.user),this.$router.push("/")})).catch((()=>alert("Invalid credentials")))}}};const I=(0,d.A)(F,[["render",x]]);var N=I;const U=[{path:"/",component:X},{path:"/post/:id",component:S},{path:"/login",component:N}],W=(0,g.aE)({history:(0,g.LA)(),routes:U});var $=W;const T=(0,n.Ef)(f);T.use($),T.mount("#app")}},o={};function e(n){var r=o[n];if(void 0!==r)return r.exports;var s=o[n]={exports:{}};return t[n].call(s.exports,s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(o,n,r,s){if(!n){var u=1/0;for(p=0;p<t.length;p++){n=t[p][0],r=t[p][1],s=t[p][2];for(var a=!0,l=0;l<n.length;l++)(!1&s||u>=s)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(a=!1,s<u&&(u=s));if(a){t.splice(p--,1);var i=r();void 0!==i&&(o=i)}}return o}s=s||0;for(var p=t.length;p>0&&t[p-1][2]>s;p--)t[p]=t[p-1];t[p]=[n,r,s]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var r,s,u=n[0],a=n[1],l=n[2],i=0;if(u.some((function(o){return 0!==t[o]}))){for(r in a)e.o(a,r)&&(e.m[r]=a[r]);if(l)var p=l(e)}for(o&&o(n);i<u.length;i++)s=u[i],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(p)},n=self["webpackChunkrwagasore_news_frontend"]=self["webpackChunkrwagasore_news_frontend"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(9254)}));n=e.O(n)})();
//# sourceMappingURL=app.a032a37a.js.map